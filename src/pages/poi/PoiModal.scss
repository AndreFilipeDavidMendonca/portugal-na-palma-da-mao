/* src/pages/poi/PoiModal.scss */
@use "@/styles/base.scss" as *;

:root {
  --poi-top: calc(var(--topbar-h) + var(--safe-top) + 10px);
  --poi-gap: 10px;
  --poi-max-w: 1180px;
  --poi-radius: 16px;

  /* separador suave */
  --gold-sep: rgba(215, 178, 90, 0.28);
}

.poi-overlay {
  position: fixed;
  inset: 0;
  z-index: 99999;
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(6px);

  display: grid;
  place-items: start center;

  padding-top: var(--poi-top);
  padding-right: calc(var(--poi-gap) + var(--safe-right));
  padding-bottom: calc(var(--poi-gap) + var(--safe-bottom));
  padding-left: calc(var(--poi-gap) + var(--safe-left));
}

.poi-card {
  width: min(var(--poi-max-w), calc(100vw - (var(--poi-gap) * 2)));
  max-height: calc(100vh - var(--poi-top) - var(--poi-gap) - var(--safe-bottom));
  overflow: hidden;

  border-radius: var(--poi-radius);
  background: var(--bg-panel);
  border: 1px solid var(--border);
  box-shadow: 0 18px 44px rgba(0, 0, 0, 0.45), 0 1px 0 rgba(255, 255, 255, 0.05) inset;

  display: flex;
  flex-direction: column;
}

.poi-header {
  flex: 0 0 auto;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

/* =========================
   BODY (Desktop default)
========================= */
.poi-body {
  flex: 1 1 auto;
  min-height: 0;
  overflow: auto;
  -webkit-overflow-scrolling: touch;

  @include gold-scroll;

  display: grid;
  grid-template-columns: 1fr 360px;
  grid-template-areas:
    "media side"
    "comments side";
  gap: 14px;

  padding: 20px;
}

/* Desktop: dá espaço real ao media para evitar overlap */
.poi-media {
  min-height: clamp(320px, 46vh, 560px);
  overflow: hidden;
  border-radius: 16px;
}

/* Garante que o conteúdo do slideshow ocupa e conta para a altura */
.poi-media > * {
  width: 100%;
  height: 100%;
}

.poi-side {
  grid-area: side;
  align-self: start;
  overflow: visible;
}

.poi-comments-wrap {
  grid-area: comments;
  min-height: 0;

  margin-top: 6px;
  padding-top: 14px;
  padding-bottom: 14px;

  border-top: 1px solid var(--gold-sep);
}

/* iPad / laptop pequeno */
@media (max-width: 1200px) {
  .poi-body {
    grid-template-columns: 1fr 320px;
    padding: 16px;
    gap: 15px;
  }
}

/* =========================
   Mobile (Chrome-safe)
========================= */
@media (max-width: 900px) {
  .poi-body {
    display: flex;
    flex-direction: column;
    gap: 0;
    padding: 14px;
    margin-bottom: 30px;

    grid-template-columns: unset;
    grid-template-areas: unset;
  }

  .poi-media {
    overflow: hidden;
    position: relative;
    border-radius: 14px;

    aspect-ratio: 16 / 9;
    max-height: 30vh;
  }

  /* garante que o componente interno acompanha o container */
  .poi-media > * {
    width: 100%;
    height: 100%;
  }

  .poi-media img,
  .poi-media video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .poi-side {
    position: relative;
    z-index: 0;
  }

  /* separador mais evidente e mais “respiro” */
  .poi-comments-wrap {
    margin-top: 10px;
    padding-top: 18px;
    padding-bottom: 14px;
    border-top: 1px solid rgba(215, 178, 90, 0.34);
  }

  /* iOS/Safari: impedir overflow horizontal do slideshow */
  .poi-card {
    overflow: hidden; /* já tens, mas garante mesmo */
  }

  .poi-body {
    overflow-x: hidden; /* evita “fuga” para a direita */
  }

  .poi-media {
    width: 100%;
    max-width: 100%;
    min-width: 0;
  }

  /* força tudo dentro da media a respeitar o container */
  .poi-media > *,
  .poi-media * {
    max-width: 100%;
    box-sizing: border-box;
    min-width: 0;
  }

  /* se o teu slideshow usar flex/track interno */
  .poi-media .track,
  .poi-media .slides,
  .poi-media .swiper,
  .poi-media .swiper-wrapper {
    width: 100%;
    max-width: 100%;
  }
}