@use "@/styles/base.scss" as *;

:root {
  --poi-top: calc(var(--topbar-h) + var(--safe-top) + 10px);
  --poi-gap: 10px;
  --poi-max-w: 1180px;
  --poi-radius: 16px;
}

/* Overlay ocupa tudo */
.poi-overlay {
  position: fixed;
  inset: 0;
  z-index: 99999;
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(6px);

  display: grid;
  place-items: start center;

  padding-top: var(--poi-top);
  padding-right: calc(var(--poi-gap) + var(--safe-right));
  padding-bottom: calc(var(--poi-gap) + var(--safe-bottom));
  padding-left: calc(var(--poi-gap) + var(--safe-left));
}

/* Card do modal: não pode rebentar o ecrã */
.poi-card {
  width: min(var(--poi-max-w), calc(100vw - (var(--poi-gap) * 2)));
  max-height: calc(100vh - var(--poi-top) - var(--poi-gap) - var(--safe-bottom));
  overflow: hidden;

  border-radius: var(--poi-radius);
  background: var(--bg-panel);
  border: 1px solid var(--border);
  box-shadow: 0 18px 44px rgba(0, 0, 0, 0.45), 0 1px 0 rgba(255, 255, 255, 0.05) inset;

  display: flex;
  flex-direction: column;
}

/* Header fixo */
.poi-header {
  flex: 0 0 auto;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

/* Corpo scrolla (só aqui) */
.poi-body {
  flex: 1 1 auto;
  min-height: 0;
  overflow: auto;
  -webkit-overflow-scrolling: touch; /* iOS */

  @include gold-scroll;

  display: grid;
  grid-template-columns: 1fr 360px;
  grid-template-areas:
    "media side"
    "comments side";
  gap: 14px;

  padding: 20px;
}

/* Áreas */
.poi-media {
  grid-area: media;
  min-height: 0;
}

.poi-side {
  grid-area: side;
  min-height: 0;
  align-self: start;
  overflow: visible;
}

.poi-comments-wrap {
  grid-area: comments;
  min-height: 0;

  padding-bottom: 14px;

}

@media (max-width: 1200px) {
  .poi-body {
    grid-template-columns: 1fr 320px;
    padding: 16px;
    gap: 15px;
  }
}
/* =========================
   Mobile layout (clean)
========================= */
@media (max-width: 900px) {
  .poi-body {
    grid-template-columns: 1fr;
    grid-template-areas:
      "media"
      "side"
      "comments";
    padding: 14px;
    gap: 15px;
  }

  .poi-media {
    grid-area: media;
    min-height: 300px;
    overflow: hidden;
    position: relative;
    z-index: 1;
  }

  .poi-media > * {
    height: 100%;
  }

  .poi-media img,
  .poi-media video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .poi-side {
    grid-area: side;
    position: relative;
    z-index: 0;
    margin-top: 5px;
    padding: 5px;
  }

  .poi-comments-wrap {
    grid-area: comments;
  }
}
